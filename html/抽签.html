<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高二丁课堂点名系统</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#8A2BE2', // 主紫色
                        secondary: '#DDA0DD', // 淡紫色
                        success: '#4CAF50', // 成功绿色
                        encouragement: '#FF9800', // 鼓励橙色
                        dark: '#1E1E2E', // 暗黑模式背景
                    },
                    fontFamily: {
                        fun: ['Comic Sans MS', 'Chalkboard SE', 'Marker Felt', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'twinkle': 'twinkle 2s ease-in-out infinite',
                        'rise': 'rise 10s linear infinite',
                        'bounce-slow': 'bounce 3s infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        twinkle: {
                            '0%, 100%': { opacity: 0.5 },
                            '50%': { opacity: 1 },
                        },
                        rise: {
                            '0%': { transform: 'translateY(100vh) scale(0.5)' },
                            '100%': { transform: 'translateY(-100vh) scale(1.5)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }
            .text-shadow-glow {
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.5);
            }
            .rainbow-text {
                background-image: linear-gradient(90deg, #ff0000, #ff9900, #ffff00, #33cc33, #3366ff, #9933ff, #ff3399);
                background-size: 1400% 100%;
                animation: rainbow 15s ease infinite;
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
            }
            .jelly {
                animation: jelly 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
            .shine {
                position: relative;
                overflow: hidden;
            }
            .shine::after {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: linear-gradient(
                    to right,
                    rgba(255, 255, 255, 0) 0%,
                    rgba(255, 255, 255, 0.3) 50%,
                    rgba(255, 255, 255, 0) 100%
                );
                transform: rotate(30deg);
                animation: shine 2s infinite;
            }
            .confetti {
                position: fixed;
                width: 10px;
                height: 10px;
                pointer-events: none;
                z-index: 50;
            }
            .firework {
                position: fixed;
                pointer-events: none;
                z-index: 50;
            }
            .heart {
                position: fixed;
                color: #FF9800;
                pointer-events: none;
                z-index: 50;
            }
            .star {
                position: fixed;
                color: #fff;
                text-shadow: 0 0 5px #fff;
                pointer-events: none;
                z-index: 10;
                animation: twinkle 2s infinite;
            }
            .bubble {
                position: fixed;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.2);
                pointer-events: none;
                z-index: 10;
            }
        }
        
        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes jelly {
            0% { transform: scale(1); }
            30% { transform: scale(1.25, 0.75); }
            40% { transform: scale(0.75, 1.25); }
            50% { transform: scale(1.15, 0.85); }
            65% { transform: scale(0.95, 1.05); }
            75% { transform: scale(1.05, 0.95); }
            100% { transform: scale(1); }
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) rotate(30deg); }
            100% { transform: translateX(100%) rotate(30deg); }
        }
        
        /* 平滑滚动 */
        html {
            scroll-behavior: smooth;
        }
        
        /* 背景渐变 */
        .bg-purple-gradient {
            background: linear-gradient(135deg, #E6E6FA 0%, #9370DB 100%);
        }
        
        .dark .bg-purple-gradient {
            background: linear-gradient(135deg, #1E1E2E 0%, #3B0066 100%);
        }

            /* From Uiverse.io by adamgiebl */ 
button {
  font-family: inherit;
  font-size: 20px;
  background: royalblue;
  color: white;
  padding: 0.7em 1em;
  padding-left: 0.9em;
  display: flex;
  align-items: center;
  border: none;
  border-radius: 16px;
  overflow: hidden;
  transition: all 0.2s;
  cursor: pointer;
}

button span {
  display: block;
  margin-left: 0.3em;
  transition: all 0.3s ease-in-out;
}

button svg {
  display: block;
  transform-origin: center center;
  transition: transform 0.3s ease-in-out;
}

button:hover .svg-wrapper {
  animation: fly-1 0.6s ease-in-out infinite alternate;
}

button:hover svg {
  transform: translateX(1.2em) rotate(45deg) scale(1.1);
}

button:hover span {
  transform: translateX(5em);
}

button:active {
  transform: scale(0.95);
}

@keyframes fly-1 {
  from {
    transform: translateY(0.1em);
  }

  to {
    transform: translateY(-0.1em);
  }
}

    </style>
</head>

<body class="bg-purple-gradient min-h-screen font-fun transition-colors duration-300">

    <!-- 装饰星星 -->
    <div id="stars-container"></div>
    
    <!-- 装饰气泡 -->
    <div id="bubbles-container"></div>
    
    <!-- 顶部导航栏 -->
    <header class="sticky top-0 z-40 backdrop-blur-md bg-white/20 dark:bg-dark/50 shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold rainbow-text flex items-center">
                <i class="fa fa-bullseye mr-2 animate-pulse-slow"></i>
                高二丁课堂点名系统
            </h1>
            
            <div class="flex items-center space-x-4">
                <button id="settings-btn" class="p-2 rounded-full hover:bg-white/30 transition-all duration-300 transform hover:scale-110">
                    <i class="fa fa-cog text-xl text-primary dark:text-secondary"></i>
                </button>
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-white/30 transition-all duration-300 transform hover:scale-110">
                    <i class="fa fa-sun-o text-xl text-primary dark:text-secondary"></i>
                </button>
                <a href="分类.html">
<button>
  <div class="svg-wrapper-1">
    <div class="svg-wrapper">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        width="24"
        height="24"
      >
        <path fill="none" d="M0 0h24v24H0z"></path>
        <path
          fill="currentColor"
          d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"
        ></path>
      </svg>
    </div>
  </div>
  <span>返回</span>
</button>
</a>
            </div>
        </div>
    </header>
    
    <!-- 主内容区 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 点名区域 -->
        <section class="max-w-3xl mx-auto mb-12 bg-white/70 dark:bg-dark/70 rounded-3xl shadow-2xl p-8 backdrop-blur-sm relative overflow-hidden">
            <div class="absolute top-0 right-0 -mt-6 -mr-6 text-6xl text-primary/20">
                <i class="fa fa-star"></i>
            </div>
            <div class="absolute bottom-0 left-0 -mb-6 -ml-6 text-6xl text-primary/20">
                <i class="fa fa-star"></i>
            </div>
            
            <h2 class="text-center text-[clamp(1.2rem,2vw,1.8rem)] mb-8 text-primary dark:text-secondary font-bold">
                <i class="fa fa-random mr-2 animate-float"></i> 随机点名
            </h2>
            
            <!-- 名字显示区域 -->
            <div id="name-display" class="bg-white dark:bg-gray-800 rounded-2xl h-40 md:h-56 flex items-center justify-center mb-8 shadow-lg border-4 border-primary/30 dark:border-secondary/30 transition-all duration-300">
                <p class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-primary dark:text-secondary text-center">
                    准备开始
                </p>
            </div>
            
            <!-- 控制按钮 -->
            <div class="flex justify-center space-x-6">
                <button id="start-btn" class="px-8 py-4 bg-primary hover:bg-primary/80 text-white rounded-full text-xl font-bold shadow-lg transform transition-all duration-300 hover:scale-110 hover:shadow-xl active:scale-95 flex items-center">
                    <i class="fa fa-play mr-2"></i> 开始
                </button>
                <button id="stop-btn" class="px-8 py-4 bg-red-500 hover:bg-red-600 text-white rounded-full text-xl font-bold shadow-lg transform transition-all duration-300 hover:scale-110 hover:shadow-xl active:scale-95 flex items-center opacity-50 cursor-not-allowed" disabled>
                    <i class="fa fa-stop mr-2"></i> 停止
                </button>
            </div>
            
            <!-- 结果反馈按钮 (默认隐藏) -->
            <div id="feedback-buttons" class="flex justify-center space-x-6 mt-8 hidden">
                <button id="correct-btn" class="px-6 py-3 bg-success hover:bg-success/80 text-white rounded-full text-lg font-bold shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-xl active:scale-95 flex items-center">
                    <i class="fa fa-check mr-2"></i> 回答正确
                </button>
                <button id="try-again-btn" class="px-6 py-3 bg-encouragement hover:bg-encouragement/80 text-white rounded-full text-lg font-bold shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-xl active:scale-95 flex items-center">
                    <i class="fa fa-refresh mr-2"></i> 需要努力
                </button>
            </div>
        </section>
        
        <!-- 历史记录区域 -->
        <section class="max-w-4xl mx-auto bg-white/70 dark:bg-dark/70 rounded-3xl shadow-2xl p-6 md:p-8 backdrop-blur-sm">
            <h2 class="text-center text-[clamp(1.2rem,2vw,1.8rem)] mb-6 text-primary dark:text-secondary font-bold">
                <i class="fa fa-trophy mr-2 animate-pulse-slow"></i> 今日英雄榜
            </h2>
            
            <div id="history-list" class="space-y-4 max-h-96 overflow-y-auto pr-2">
                <div class="text-center text-gray-500 dark:text-gray-400 py-8">
                    <i class="fa fa-history text-4xl mb-2 opacity-50"></i>
                    <p>还没有点名记录哦</p>
                </div>
            </div>
        </section>
    </main>
    
    <!-- 底部信息栏 -->
    <footer class="mt-12 py-6 bg-white/30 dark:bg-dark/30 backdrop-blur-sm">
        <div class="container mx-auto px-4 text-center text-gray-700 dark:text-gray-300">
            <p class="text-lg">快乐课堂点名系统 &copy; 2023</p>
            <p class="text-sm mt-1">让每一次点名都充满乐趣 <i class="fa fa-smile-o"></i></p>
        </div>
    </footer>
    
    <!-- 设置模态框 -->
    <div id="settings-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-6 md:p-8 max-w-2xl w-full mx-4 transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-primary dark:text-secondary">
                    <i class="fa fa-cog mr-2"></i> 个性化设置
                </h3>
                <button id="close-settings" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <!-- 表扬语录设置 -->
            <div class="mb-6">
                <h4 class="text-xl font-bold mb-3 text-primary dark:text-secondary">
                    <i class="fa fa-thumbs-up mr-2"></i> 表扬语录
                </h4>
                <p class="text-gray-600 dark:text-gray-300 mb-2">每行一条，用于"回答正确"时显示</p>
                <textarea id="praise-messages" class="w-full h-32 p-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-secondary resize-none" placeholder="例如：你真是个小天才！..."></textarea>
            </div>
            
            <!-- 鼓励语录设置 -->
            <div class="mb-6">
                <h4 class="text-xl font-bold mb-3 text-primary dark:text-secondary">
                    <i class="fa fa-heart mr-2"></i> 鼓励语录
                </h4>
                <p class="text-gray-600 dark:text-gray-300 mb-2">每行一条，用于"需要努力"时显示</p>
                <textarea id="encourage-messages" class="w-full h-32 p-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-secondary resize-none" placeholder="例如：没关系，下次一定可以的！..."></textarea>
            </div>
            
            <div class="flex justify-end">
                <button id="save-settings" class="px-6 py-3 bg-primary hover:bg-primary/80 text-white rounded-full text-lg font-bold shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-xl active:scale-95">
                    <i class="fa fa-save mr-2"></i> 保存设置
                </button>
            </div>
        </div>
    </div>
    
    <!-- 提示消息框 -->
    <div id="toast" class="fixed top-20 left-1/2 transform -translate-x-1/2 bg-white dark:bg-gray-800 shadow-2xl rounded-full px-6 py-3 flex items-center z-50 opacity-0 transition-all duration-300 translate-y-[-20px] pointer-events-none">
        <i id="toast-icon" class="mr-2 text-xl"></i>
        <span id="toast-message"></span>
    </div>
    
    <!-- 反馈弹窗 -->
    <div id="feedback-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-500 scale-90 opacity-0" id="feedback-content">
            <div class="text-center">
                <div id="feedback-icon" class="text-6xl mb-4"></div>
                <h3 id="feedback-title" class="text-2xl font-bold mb-2"></h3>
                <p id="feedback-message" class="text-lg mb-6"></p>
                <button id="close-feedback" class="px-6 py-3 bg-primary hover:bg-primary/80 text-white rounded-full text-lg font-bold shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-xl active:scale-95">
                    太棒了！
                </button>
            </div>
        </div>
    </div>

    <script>
        // 学生名单
        const studentNames = [
            "01司徒咏麒", "02吳嘉敏", "03吳嘉儀", "04呂雲玉", "05李健豪", "06李鵬宇", "07周琬宜",
            "08林承煉", "09邱紫琳", "10侯靖軒", "11施嘉濠", "12唐嘉豪", "13崔承希", "14梁珈瑩",
            "15梁敬楓", "16符周鶴", "17郭泳琳", "18郭嘉皓", "19陳嘉熙", "20曾君昊", "21曾俊華",
            "22童豪軒", "23馮于庭", "24黃嘉曦", "25葉鵬宇", "26劉鈺兒", "27歐建業", "28魯泳琳",
            "29龍子軒", "30薛勇", "31謝滿鈴", "32謝錦輝", "33顏子涵"
        ];
        
        // 默认表扬语
        const defaultPraiseMessages = [
            "你真是个小天才！",
            "太精彩了！",
            "太聪明了！",
            "真厉害，继续加油！",
            "太出色了！",
            "太优秀了！",
            "你真是太棒了！",
            "太精彩的回答了！",
            "真聪明，一点就通！",
            "你是我们的小老师！"
        ];
        
        // 默认鼓励语
        const defaultEncourageMessages = [
            "没关系，下次一定可以的！",
            "不要灰心，继续努力！",
            "加油，你离成功不远了！",
            "相信自己，你能做到的！",
            "再试一次，你会更好的！",
            "别放弃，继续努力！",
            "下次你一定会成功的！",
            "坚持下去，你会进步的！",
            "每个人都有进步的空间！",
            "失败是成功之母，继续加油！"
        ];
        
        // 全局变量
        let availableNames = [...studentNames];
        let isRolling = false;
        let rollInterval;
        let praiseMessages = [...defaultPraiseMessages];
        let encourageMessages = [...defaultEncourageMessages];
        let historyRecords = [];
        
        // DOM元素
        const nameDisplay = document.getElementById('name-display');
        const startBtn = document.getElementById('start-btn');
        const stopBtn = document.getElementById('stop-btn');
        const feedbackButtons = document.getElementById('feedback-buttons');
        const correctBtn = document.getElementById('correct-btn');
        const tryAgainBtn = document.getElementById('try-again-btn');
        const historyList = document.getElementById('history-list');
        const settingsBtn = document.getElementById('settings-btn');
        const settingsModal = document.getElementById('settings-modal');
        const modalContent = document.getElementById('modal-content');
        const closeSettings = document.getElementById('close-settings');
        const saveSettings = document.getElementById('save-settings');
        const praiseMessagesEl = document.getElementById('praise-messages');
        const encourageMessagesEl = document.getElementById('encourage-messages');
        const themeToggle = document.getElementById('theme-toggle');
        const toast = document.getElementById('toast');
        const toastIcon = document.getElementById('toast-icon');
        const toastMessage = document.getElementById('toast-message');
        const feedbackModal = document.getElementById('feedback-modal');
        const feedbackContent = document.getElementById('feedback-content');
        const feedbackIcon = document.getElementById('feedback-icon');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackMessageEl = document.getElementById('feedback-message');
        const closeFeedback = document.getElementById('close-feedback');
        const starsContainer = document.getElementById('stars-container');
        const bubblesContainer = document.getElementById('bubbles-container');
        
        // 初始化
        function init() {
            // 填充默认语录
            praiseMessagesEl.value = praiseMessages.join('\n');
            encourageMessagesEl.value = encourageMessages.join('\n');
            
            // 检查主题设置
            if (localStorage.getItem('darkMode') === 'true' || 
                (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                themeToggle.innerHTML = '<i class="fa fa-moon-o text-xl text-primary dark:text-secondary"></i>';
            }
            
            // 创建装饰元素
            createStars(20);
            createBubbles(15);
            
            // 事件监听
            startBtn.addEventListener('click', startRolling);
            stopBtn.addEventListener('click', stopRolling);
            correctBtn.addEventListener('click', () => handleFeedback(true));
            tryAgainBtn.addEventListener('click', () => handleFeedback(false));
            settingsBtn.addEventListener('click', openSettings);
            closeSettings.addEventListener('click', closeSettingsModal);
            saveSettings.addEventListener('click', saveSettingsData);
            themeToggle.addEventListener('click', toggleTheme);
            closeFeedback.addEventListener('click', closeFeedbackModal);
        }
        
        // 创建星星装饰
        function createStars(count) {
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.innerHTML = '★';
                star.style.left = `${Math.random() * 100}vw`;
                star.style.top = `${Math.random() * 100}vh`;
                star.style.fontSize = `${Math.random() * 16 + 8}px`;
                star.style.opacity = Math.random() * 0.8 + 0.2;
                star.style.animationDelay = `${Math.random() * 2}s`;
                starsContainer.appendChild(star);
            }
        }
        
        // 创建气泡装饰
        function createBubbles(count) {
            for (let i = 0; i < count; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble animate-rise';
                const size = Math.random() * 60 + 20;
                bubble.style.width = `${size}px`;
                bubble.style.height = `${size}px`;
                bubble.style.left = `${Math.random() * 100}vw`;
                bubble.style.bottom = `-${size}px`;
                bubble.style.animationDuration = `${Math.random() * 20 + 10}s`;
                bubble.style.animationDelay = `${Math.random() * 10}s`;
                bubble.style.opacity = Math.random() * 0.5 + 0.2;
                bubblesContainer.appendChild(bubble);
            }
        }
        
        // 开始滚动名字
        function startRolling() {
            if (availableNames.length === 0) {
                showToast('所有学生都已被点过名啦！', 'info');
                return;
            }
            
            isRolling = true;
            startBtn.disabled = true;
            startBtn.classList.add('opacity-50', 'cursor-not-allowed');
            stopBtn.disabled = false;
            stopBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            feedbackButtons.classList.add('hidden');
            
            // 清除之前的间隔
            if (rollInterval) clearInterval(rollInterval);
            
            // 设置新的间隔来快速切换名字
            rollInterval = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * availableNames.length);
                nameDisplay.innerHTML = `<p class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-primary dark:text-secondary text-center">${availableNames[randomIndex]}</p>`;
            }, 50);
            
            showToast('开始点名啦！点击"停止"按钮结束', 'info');
        }
        
        // 停止滚动名字
        function stopRolling() {
            if (!isRolling) return;
            
            clearInterval(rollInterval);
            isRolling = false;
            
            startBtn.disabled = false;
            startBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            stopBtn.disabled = true;
            stopBtn.classList.add('opacity-50', 'cursor-not-allowed');
            
            // 获取当前显示的名字
            const selectedName = nameDisplay.querySelector('p').textContent;
            
            // 移除已选中的名字，避免重复
            availableNames = availableNames.filter(name => name !== selectedName);
            
            // 添加动画效果
            nameDisplay.innerHTML = `<p class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-primary dark:text-secondary text-center jelly shine">${selectedName}</p>`;
            
            // 显示反馈按钮
            feedbackButtons.classList.remove('hidden');
            
            showToast(`选中了 ${selectedName}，请选择回答结果`, 'info');
        }
        
        // 处理反馈结果
        function handleFeedback(isCorrect) {
            const selectedName = nameDisplay.querySelector('p').textContent;
            const now = new Date();
            const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            // 记录结果
            const result = {
                name: selectedName,
                time: timeString,
                correct: isCorrect
            };
            historyRecords.unshift(result); // 添加到开头
            
            // 更新历史记录显示
            updateHistoryList();
            
            // 显示反馈弹窗和动画
            if (isCorrect) {
                const message = praiseMessages[Math.floor(Math.random() * praiseMessages.length)];
                showFeedbackModal('太棒了！', message, 'success');
                createConfetti();
                createFireworks();
            } else {
                const message = encourageMessages[Math.floor(Math.random() * encourageMessages.length)];
                showFeedbackModal('继续加油！', message, 'encourage');
                createHearts();
            }
            
            // 隐藏反馈按钮
            feedbackButtons.classList.add('hidden');
        }
        
        // 更新历史记录列表
        function updateHistoryList() {
            // 清空列表
            historyList.innerHTML = '';
            
            if (historyRecords.length === 0) {
                historyList.innerHTML = `
                    <div class="text-center text-gray-500 dark:text-gray-400 py-8">
                        <i class="fa fa-history text-4xl mb-2 opacity-50"></i>
                        <p>还没有点名记录哦</p>
                    </div>
                `;
                return;
            }
            
            // 添加记录
            historyRecords.forEach((record, index) => {
                const recordEl = document.createElement('div');
                recordEl.className = `bg-white dark:bg-gray-700 rounded-xl p-4 shadow-md transition-all duration-300 ${index === 0 ? 'ring-2 ring-primary dark:ring-secondary' : ''}`;
                
                const resultClass = record.correct ? 'bg-success/20 text-success' : 'bg-encouragement/20 text-encouragement';
                const resultText = record.correct ? '回答正确' : '继续努力';
                const resultIcon = record.correct ? 'fa-check' : 'fa-refresh';
                
                recordEl.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <h4 class="font-bold text-lg text-primary dark:text-secondary">${record.name}</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-400">${record.time}</p>
                        </div>
                        <span class="flex items-center px-3 py-1 rounded-full ${resultClass} text-sm font-medium">
                            <i class="fa ${resultIcon} mr-1"></i> ${resultText}
                        </span>
                    </div>
                `;
                
                historyList.appendChild(recordEl);
            });
        }
        
        // 打开设置面板
        function openSettings() {
            settingsModal.classList.remove('hidden');
            // 触发动画
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }
        
        // 关闭设置面板
        function closeSettingsModal() {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            // 隐藏模态框
            setTimeout(() => {
                settingsModal.classList.add('hidden');
            }, 300);
        }
        
        // 保存设置
        function saveSettingsData() {
            const newPraise = praiseMessagesEl.value.split('\n').filter(msg => msg.trim() !== '');
            const newEncourage = encourageMessagesEl.value.split('\n').filter(msg => msg.trim() !== '');
            
            // 如果为空则使用默认值
            praiseMessages = newPraise.length > 0 ? newPraise : [...defaultPraiseMessages];
            encourageMessages = newEncourage.length > 0 ? newEncourage : [...defaultEncourageMessages];
            
            // 重新填充文本框（清除空行）
            praiseMessagesEl.value = praiseMessages.join('\n');
            encourageMessagesEl.value = encourageMessages.join('\n');
            
            closeSettingsModal();
            showToast('设置已保存！', 'success');
        }
        
        // 切换主题
        function toggleTheme() {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', isDark);
            
            if (isDark) {
                themeToggle.innerHTML = '<i class="fa fa-moon-o text-xl text-primary dark:text-secondary"></i>';
                showToast('已切换到暗黑模式', 'info');
            } else {
                themeToggle.innerHTML = '<i class="fa fa-sun-o text-xl text-primary dark:text-secondary"></i>';
                showToast('已切换到明亮模式', 'info');
            }
        }
        
        // 显示提示消息
        function showToast(message, type = 'info') {
            toastMessage.textContent = message;
            
            // 设置图标和颜色
            switch (type) {
                case 'success':
                    toastIcon.className = 'fa fa-check-circle text-success';
                    break;
                case 'error':
                    toastIcon.className = 'fa fa-exclamation-circle text-red-500';
                    break;
                case 'info':
                default:
                    toastIcon.className = 'fa fa-info-circle text-primary';
                    break;
            }
            
            // 显示提示
            toast.classList.remove('opacity-0', 'translate-y-[-20px]');
            toast.classList.add('opacity-100', 'translate-y-0');
            
            // 3秒后隐藏
            setTimeout(() => {
                toast.classList.remove('opacity-100', 'translate-y-0');
                toast.classList.add('opacity-0', 'translate-y-[-20px]');
            }, 3000);
        }
        
        // 显示反馈弹窗
        function showFeedbackModal(title, message, type) {
            feedbackTitle.textContent = title;
            feedbackMessageEl.textContent = message;
            
            // 设置图标
            if (type === 'success') {
                feedbackIcon.className = 'fa fa-trophy text-yellow-500';
            } else {
                feedbackIcon.className = 'fa fa-heart text-encouragement';
            }
            
            feedbackModal.classList.remove('hidden');
            
            // 触发动画
            setTimeout(() => {
                feedbackContent.classList.remove('scale-90', 'opacity-0');
                feedbackContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }
        
        // 关闭反馈弹窗
        function closeFeedbackModal() {
            feedbackContent.classList.remove('scale-100', 'opacity-100');
            feedbackContent.classList.add('scale-90', 'opacity-0');
            
            // 隐藏模态框
            setTimeout(() => {
                feedbackModal.classList.add('hidden');
            }, 300);
        }
        
        // 创建彩色纸屑动画
        function createConfetti() {
            const colors = ['#ff0000', '#ff9900', '#ffff00', '#33cc33', '#3366ff', '#9933ff', '#ff3399'];
            const count = 100;
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.top = `-${Math.random() * 20 + 10}px`;
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                
                document.body.appendChild(confetti);
                
                // 动画结束后移除元素
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
            
            // 添加下落动画
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fall {
                    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
                    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            // 移除样式
            setTimeout(() => {
                style.remove();
            }, 5000);
        }
        
        // 创建烟花动画
        function createFireworks() {
            const count = 5;
            
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    
                    // 随机位置
                    const x = Math.random() * 80 + 10;
                    const y = Math.random() * 60 + 20;
                    
                    firework.style.left = `${x}vw`;
                    firework.style.top = `${y}vh`;
                    firework.style.width = '5px';
                    firework.style.height = '5px';
                    firework.style.backgroundColor = 'white';
                    firework.style.borderRadius = '50%';
                    firework.style.boxShadow = '0 0 20px 10px white';
                    firework.style.animation = `firework-explode 1s forwards`;
                    
                    document.body.appendChild(firework);
                    
                    // 动画结束后移除元素
                    setTimeout(() => {
                        firework.remove();
                    }, 1000);
                }, i * 500);
            }
            
            // 添加烟花动画
            const style = document.createElement('style');
            style.textContent = `
                @keyframes firework-explode {
                    0% { transform: scale(1); opacity: 1; }
                    100% { transform: scale(15); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            // 移除样式
            setTimeout(() => {
                style.remove();
            }, 3000);
        }
        
        // 创建爱心动画
        function createHearts() {
            const count = 15;
            
            for (let i = 0; i < count; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '❤';
                heart.style.left = `${Math.random() * 100}vw`;
                heart.style.bottom = `0`;
                heart.style.fontSize = `${Math.random() * 20 + 16}px`;
                heart.style.animation = `heart-rise ${Math.random() * 4 + 3}s linear forwards`;
                heart.style.opacity = Math.random() * 0.8 + 0.2;
                heart.style.transform = `rotate(${Math.random() * 40 - 20}deg)`;
                
                document.body.appendChild(heart);
                
                // 动画结束后移除元素
                setTimeout(() => {
                    heart.remove();
                }, 7000);
            }
            
            // 添加爱心上升动画
            const style = document.createElement('style');
            style.textContent = `
                @keyframes heart-rise {
                    0% { transform: translateY(0) rotate(${Math.random() * 40 - 20}deg); opacity: 1; }
                    100% { transform: translateY(-100vh) rotate(${Math.random() * 40 - 20}deg); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            // 移除样式
            setTimeout(() => {
                style.remove();
            }, 7000);
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
